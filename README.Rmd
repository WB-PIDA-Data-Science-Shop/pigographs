---
title: "pigographs"
output: 
  github_document:
    toc: yes
    toc_depth: 2
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)

```

<!-- badges: start -->

<!-- badges: end -->

## Overview

This repository reproduces the analysis presented in the Public Institutions Global Observatory (PIGO): Annual Review 2025. The `Pigographs` package is designed to streamline the analysis and visualization of institutional and governance indicators. It provides the following key features:

Data Transformations: Scripts to clean and reshape raw inputs, located in the `data-raw/source` directory. Data Analysis: Functions in the `R` directory and scripts in the `analysis` directory for generating visualizations and insights. This `README` guides you through setting up your environment, restoring dependencies, and running the full analysis pipeline.

**Project Structure:**

The repository is organized as follows:

```         
├── data-raw/           # Raw data and initial processing scripts.
│   ├── source          # Scripts for transforming raw data
│   ├── input           # Raw data files (provided by the EGVPI Team)
│   └── output          # Transformed data for ad-hoc analysis
├── analysis/           # Scripts for analysis and plotting.
├── R/                  # Custom R functions.
├── documentation/      # Reproducibility documentation.
├── data/               # Processed data for analysis.
├── figures/            # Final generated plots.
├── man/                # R package manual pages.
├── renv/               # R package dependency management.
├── README.Rmd          # Main file to run the reproducibility workflow.
├── pigographs.Rproj    # RStudio project file.
├── .gitignore          # Files ignored by Git.
├── .Rbuildignore       # Files ignored when building.
├── .Rprofile           # Project-specific R startup settings.
├── DESCRIPTION         # Project metadata.
├── LICENSE             # Licensing information.
├── LICENSE.md          # License in Markdown format.
├── NAMESPACE           # Package namespace definition.
└── spielplatz/         # Sandbox/experimentation area.
```

**Requirements:**

### Software

-   **R**: Version 4.3 or higher

-   **Dependency Management**: `renv` for managing package dependencies

-   **Development Tools**: `devtools` for package loading

### Hardware

-   **Memory**: No minimum required, but 16 GB is recommended for optimal performance.

-   **Run Time**: ~3 minutes on recommended hardware.

## Installations for Replication

### 1. Restoring Dependencies

Before running any scripts, restore the exact package versions recorded in `renv.lock`. Open the `pigographs.Rproj` and run `renv::restore()`. Alternatively, you can run this helper snippet from your R console:

```{r include=FALSE}
# Locate project root and restore packages
find_root <- function(filename = "renv.lock") {
  path <- normalizePath(getwd(), winslash = "/", mustWork = TRUE)
  while (!file.exists(file.path(path, filename))) {
    parent <- dirname(path)
    if (parent == path) {
      stop("Cannot find renv.lock in any parent directory.")
    }
    path <- parent
  }
  path
}

project_root <- find_root()

renv::restore(project = project_root)


```



### 2. Running the Full Workflow

The package workflow consists of two main steps:

Data Transformation: Make sure you have the input folder provided by the EGVPI team and source all raw-data scripts located at `data-raw/source`

Data Analysis: source all analysis and plotting scripts at `analysis` for reproducibility

For both, simply run the following code:

```{r eval=FALSE, warning=FALSE}
library(here)

# Defining all the folders
dirs <- c(
          here("data-raw", "source"), # Data Cleaning Scripts (optional)
          here("analysis") # Data Analysis scripts
)

# helper to source every .R/.r file in a directory
source_all <- function(dir) {
  scripts <- list.files(
    path       = dir,
    pattern    = "\\.[Rr]$",
    full.names = TRUE
  )
  invisible(lapply(scripts, source))
}

# Source all the scripts listed
invisible(lapply(dirs, source_all))

```

All generated figures and outputs will be saved in the `figures/` directory. For details on table of exhibits, documentation, and advanced usage, please refer to the full README.doc
