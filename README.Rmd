---
title: "pigographs (under construction)"
output: 
  github_document:
    toc: yes
    toc_depth: 2
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)

```

<!-- badges: start -->

<!-- badges: end -->

## Overview

This repository aims to reproduce the analysis presented in the Public Institutions Global Observatory (PIGO): Annual Review 2025. The Pigographs package is designed to streamline the analysis and visualization of institutional and governance indicators. It provides:

Data transformations: scripts to clean and reshape raw inputs.

Data Analysis: functions and scripts for visualization and reporting.

Reproducibility: a standardized workflow to reproduce the final outputs

This README guides you through setting up your environment, restoring dependencies, and running the full pipeline.

Project Structure
```
├── data-raw
│   └── source       # Raw-data transformation scripts
│   └── input        # Raw data files ordered by data source
│   └── output       # Tranformed Data for ad-hoc analysis
├── analysis         # Data analysis and plotting scripts
├── R                # Package functions
├── documentation    # DAS and other reproducibility docuemntation
├── data             # Transformed data frames available to lazy-load
├── figures          # Final outputs for verification
├── renv             # For environment setting
├── README.Rmd       # This file (Read and Knit to reproduce analysis)
└── pigographs.Rproj # RStudio project file
```

Requierments:

Software: R (>= 4.3), renv for dependency management and devtools (for installing development versions).


## Installations for Replication

### 1. Restoring Dependencies 
Before running any scripts, restore package versions from renv.lock. From the project root:

```{r eval=FALSE}
# Locate project root and restore packages
find_root <- function(filename = "renv.lock") {
  path <- normalizePath(getwd(), winslash = "/", mustWork = TRUE)
  while (!file.exists(file.path(path, filename))) {
    parent <- dirname(path)
    if (parent == path) {
      stop("Cannot find renv.lock in any parent directory.")
    }
    path <- parent
  }
  path
}

project_root <- find_root()
renv::restore(project = project_root)
```

(optional) In case you are interested in installing the development version of pictographs from [GitHub](https://github.com/) you can:

```{r, eval=FALSE }
# Install devtools if you haven't already
install.packages("devtools")

# install.packages("pak")
pak::pak("WB-PIDA-Data-Science-Shop/pigographs")
```

### 2. Running the Full Workflow 
The package workflow consists of two main steps:

Data Transformation: source all raw-data cleaning scripts located at `data-raw/source`

Data Analysis: source all analysis and plotting scripts at `analysis`

Simply knit this document (README.Rmd) or run the setup chunk at the top:


```{r, eval=FALSE}
library(here)

# Defining all the folders
dirs <- c(
          # here("data-raw", "source"), # Data Cleaning Scripts (optional)
            here("analysis") # Data Analysis scripts
)

# helper to source every .R/.r file in a directory
source_all <- function(dir) {
  scripts <- list.files(
    path       = dir,
    pattern    = "\\.[Rr]$",
    full.names = TRUE
  )
  invisible(lapply(scripts, source))
}

# Source all the scripts listed
invisible(lapply(dirs, source_all))
```

After sourcing, all transformed figures (outputs) will be exported to the `figures` directory






